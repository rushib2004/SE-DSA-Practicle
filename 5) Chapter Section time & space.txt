#include<iostream>
#include<string>
using namespace std;

struct book_node {
    string title;
    int chapt_count;
    book_node* down[10];
    
    book_node() {
        title = "";
        chapt_count = 0;
        for (int i = 0; i < 10; ++i)
            down[i] = nullptr;
    }
};

class book {
public:
    book_node* root;
    
    void create_tree();
    void display(book_node* r);
    
    book() {
        root = nullptr;
    }
};

void book::create_tree() {
    root = new book_node;
    cout << "Enter name of the book: ";
    cin.ignore();
    getline(cin, root->title);
    cout << "Enter total number of chapters in the book: ";
    cin >> root->chapt_count;

    for (int i = 0; i < root->chapt_count; ++i) {
        root->down[i] = new book_node;
        cout << "Enter Name for chapter " << i + 1 << ": ";
        cin.ignore();
        getline(cin, root->down[i]->title);
        cout << "Enter no. of sections in " << root->down[i]->title << ": ";
        cin >> root->down[i]->chapt_count;
        
        cout << "Enter details for chapter " << i + 1 << endl;
        for (int j = 0; j < root->down[i]->chapt_count; ++j) {
            root->down[i]->down[j] = new book_node;
            cout << "Enter title for section " << j + 1 << ": ";
            cin.ignore();
            getline(cin, root->down[i]->down[j]->title);
            cout << "Enter no. of sub sections in section " << j + 1 << ": ";
            cin >> root->down[i]->down[j]->chapt_count;
            
            for (int k = 0; k < root->down[i]->down[j]->chapt_count; ++k) {
                root->down[i]->down[j]->down[k] = new book_node;
                cout << "Enter title for subsection " << k + 1 << ": ";
                cin.ignore();
                getline(cin, root->down[i]->down[j]->down[k]->title);
            }
        }
    }
}

void book::display(book_node* r) {
    if (r != nullptr) {
        cout << "****index****" << endl; 
        cout << "Book Title: " << r->title << endl << endl;

        for (int i = 0; i < r->chapt_count; ++i) {
            cout << "\tChapter " << i + 1 << ": " << r->down[i]->title << endl;
            
            for (int j = 0; j < r->down[i]->chapt_count; ++j) {
                cout << "\t\tSection " << j + 1 << ": " << r->down[i]->down[j]->title << endl;
                
                for (int k = 0; k < r->down[i]->down[j]->chapt_count; ++k) {
                    cout << "\t\t\tSub Section " << k + 1 << ": " << r->down[i]->down[j]->down[k]->title << endl;
                } 
            }
        }
    }
}

int main() {
    int choice;
    book book;
    while (true) {
        cout << "Menu:" << endl;
        cout << "1. Create tree" << endl;
        cout << "2. Display tree" << endl;
        cout << "3. Exit" << endl;
        cout << "Enter your choice: ";
        cin >> choice;
        switch (choice) {
            case 1:
                book.create_tree();
                break;
            case 2:
                book.display(book.root);
                break;
            case 3:
                exit(0);
        }
    }
    return 0;
}
